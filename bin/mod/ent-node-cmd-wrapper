#!/bin/bash

PRINT_BANNER=false; [[ "$1" = "--banner" ]] && { PRINT_BANNER=true; shift; }

WRAPPED_COMMAND="$1";
[[ "$3" = "--cmplt" ]] && exit 0
[[ "$3" = "--help" && "$4" == "--short" ]] && { echo -e "$2"; exit 0; }
shift 2

ORIGINAL_DIR="$PWD"
DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)"
cd "$DIR/../.." || {
  echo "Internal error: unable to find the script source dir" 1>&2
  exit
}
. s/_base.sh
cd "$ORIGINAL_DIR" || _FATAL "Unable return to the original dir: $ORIGINAL_DIR"

$PRINT_BANNER && print_entando_banner
"_ent-$WRAPPED_COMMAND" "$@"
